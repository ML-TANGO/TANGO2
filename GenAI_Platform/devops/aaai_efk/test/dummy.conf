[SERVICE]
    Parsers_File /home/min/jp/devops/aaai_efk/test/parsers.conf

[INPUT]
    Name dummy
    Tag  dummy.A
    Dummy {"log":"[FLIGHTBASE] {\"message\": \"Hi\", \"test\": \"123\"}", "others": "data"}


[FILTER]
    Name        rewrite_tag
    Match       dummy.*
    Rule        log ^\[FLIGHTBASE\] training.$TAG true

[FILTER]
    Name        parser 
    Match       training.*
    Key_Name    log
    Parser      jfb-remove-training-header
    Preserve_Key Off
    Reserve_Data On

[FILTER]
    Name    nest
    Match   training.*
    Operation   nest
    Wildcard    log
    Nested_under  user_items

[FILTER]
    Name        parser 
    Match       training.*
    Key_Name    log
    Parser      training-json
    Preserve_Key Off
    Reserve_Data On

#[FILTER]
#    Name              multiline
#    Match             dummy.*
#    multiline.key_content   log
#    multiline.parser        multiline-custom

# [FILTER]
#     Name            parser
#     Match_Regex     dummy\.(data|system)
#     Key_Name        log
#     Parser          jfb_extract_level
#     Preserve_Key    Off
#     Reserve_Data    On

[OUTPUT]
    Name stdout
    Match training.*